# Домашнее задание к занятию "Regexp и его использование для синтаксического анализа"

### Цель задания
В результате выполнения этого задания вы научитесь использовать:
1. Регулярные выражения для фильтрации вывода;
2. Утилиту sed для работы с конфигурационными файлами;
3. Утилиту awk для анализа информации.

------

### Чеклист готовности к домашнему заданию

1. Установлена операционная система Ubuntu на виртуальную машину или локально и имеется доступ к терминалу (удаленный или из графической оболочки)
2. Произведена работа с файлами, рассматриваемыми на лекции, которые находятся [ссылке](5-03/)

### Инструкция к заданию

1. Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте на проверку ссылку на ваш документ в личном кабинете.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в “Настройки доступа” и выберите доступ “Просматривать могут все в Интернете, у кого есть ссылка”. Ссылка на инструкцию [Как предоставить доступ к файлам и папкам на Google Диске](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop)
4. Скопируйте текст задания в свой  Google Документ.
5. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты и код в свой Google Документ.
6. Для проверки домашнего задания преподавателем отправьте ссылку на ваш Google документ в личном кабинете.
7. Любые вопросы по решению задач задавайте в чате учебной группы.

------


### Задание 1.

Напишите регулярное выражение для проверки является ли строка `IPv4` адресом.

Для тестов можно использовать файл со следующим содержимым, фильтруя вывод с помощью команды `grep -E`:
```
192.168.0.1
127.0.0.1
84.345.23.11
88.3A.56.76
224.12.76
999.999.999.999
355.255.255.257
0.0.0.0
```

*Пришлите получившееся выражение в качестве ответа.*

---
**Ответ:** ^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$

### Задание 2.

В Вашей конфигурации Nginx скопилось много неиспользуемых сегментов и становится сложно его читать.

Используя `sed` удалите все пустые строки и комментарии в конфигурации Nginx.

Попробуйте сделать это одним запуском.

Файл расположен по [ссылке](5-03/nginx.conf)


*Пришлите получившуюся команду в качестве ответа*

------
**Ответ:** sed -i -e '/^#/d; /^$/d' nginx.conf


### Задание 3.

Используя `awk` и `ps aux` соберите информацию о:
 - количестве процессов для каждого пользователя;
 - процессе с самым большим PID;
 - (дополнительное задание со звездочкой*) суммарном использовании памяти различными пользователями.

*Пришлите скриншоты со скриптами и демонстрацией их работы*

---
**Ответ:**
1. count_user_procs.sh

#!/bin/bash

echo "Количество процессов по пользователям:"  
echo "-------------------------------------"  
ps aux | awk ' NR>1 
{users[$1]++}  
END 
{for (user in users)  
  {printf "Пользователь: %-15s 
 Процессов: %d\n", user, users[user]}  
}' | sort -k5 -nr  

2. max_pid_proc.sh  

#!/bin/bash

echo "Процесс с максимальным PID:"
echo "---------------------------"

ps aux | awk '
BEGIN {
    max_pid = 0
    cmd = ""
}
NR>1 {
    if ($2 > max_pid) {
        max_pid = $2
        cmd = $11
        user = $1
    }
}
END {
    printf "Max PID: %-8d Пользователь: %-10s Команда: %s\n", max_pid, user, cmd
}'

3. user_mem_usage.sh  

#!/bin/bash

echo "Процесс с максимальным PID:"
echo "---------------------------"

ps aux | awk '
BEGIN {
    max_pid = 0
    cmd = ""
}
NR>1 {
    if ($2 > max_pid) {
        max_pid = $2
        cmd = $11
        user = $1
    }
}
END {
    printf "Max PID: %-8d Пользователь: %-10s Команда: %s\n", max_pid, user, cmd

скрин 1  

скрин 2  

скрин 3  
}'
